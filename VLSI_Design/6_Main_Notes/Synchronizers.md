03-08-2024 12:41

Status:

Tag:


# Synchronizers

When a FF receives an Asynchronous input, there might be a scenario when the input might come during the setup or hold time period, which could lead to the FF being into metastability.
![[Pasted image 20240803124352.png]]

### Asynchronous inputs can be
- Output of a FF, that is operating at different clock frequency.
- Outputs generated by some process, that is not synchronized to the synchronized clock. For ex., An input coming from a Push button, directly to the FF.



To avoid metastability in Sequential circuits, we use synchronizers before giving the input.

# Single Stage Synchronizer
![[Pasted image 20240803124708.png]]

We assume that the asynchronous input (ainp) will stay valid at least for 1 clock cycle in order for the Sync FF to sample it. 

So now the issue of metastability has been moved to the Synchronizer D-FF.
Now the  ainp will be synchronized to the same clock as the sequential circuit's FF. The output of Sync D-FF will appear after its propagation delay. Now this output will meet the setup time after 1 lock cycle.
**There will be a latency of 1 clock cycle for the FFs to sample the synchronized input.**

Still the Sync FF can get into metastability, but proper clock period will eventually not let the next FF come into metastability.

What if the Sync FF cannot get out of metastability?

#### Metastability Resolution Time ($t_{r}$)
The probability of a FF remaining in metastability decreases exponentially with time.
Metastability Resolution Time is the time available for the Sync FF to get out of metastability before the next clock edge. 
![[Synchronizers 2024-08-03 13.07.24.excalidraw]]

$$
t_{r}=T_{CLK}-t_{comb}-t_{setup \;time} 
$$


# Double Stage Synchronizers

In order to improve the Metastability Resolution Time, we can get rid of the term $t_{comb}$ by using another D-FF in the Synchronizer stage.
Now the Metastability Resolution Time will be
$$
t_{r}=T_{CLK}-t_{setup \;time} 
$$
But now there will be latency of 2 FFs. Now two clock cycles will be used in order to synchronize the input to the Sequential Circuit FFs.


![[Pasted image 20240803131203.png]]

# Multi-Cycle Synchronizers

We can not improve the $t_{setup\;time}$ because it is given by the foundry itself.
We can improve the Metastability Resolution Time by improving the $T_{CLK}$. But that could affect the System itself. So a Counter is used, in order to increase the frequency of the Synchronizer FFs.
Usually, Mod-2 or Mod-3 counter is used and not more than that.

![[Pasted image 20240803131433.png]]

Now the Metastability Resolution Time becomes

$$
t_{r}=nT_{CLK}-t_{setup \;time} 
$$
Latency becomes $2nT_{CLK}$


### Always give asynchronous inputs like this
![[Pasted image 20240804131108.png]]





# References:


